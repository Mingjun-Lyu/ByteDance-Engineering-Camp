{
  "$schema": "./guide-config-schema.json",
  "id": "user-onboarding",
  "name": "用户引导流程",
  "description": "新用户首次使用应用程序的引导流程",
  "version": "1.0.0",
  "author": "引导系统",
  "createdAt": "2024-01-01T00:00:00.000Z",
  "updatedAt": "2024-01-01T00:00:00.000Z",
  
  "metadata": {
    "category": "onboarding",
    "priority": "high",
    "targetAudience": ["new-users"],
    "estimatedDuration": 300,
    "prerequisites": ["user-logged-in"]
  },
  
  "conditions": {
    "required": [
      "#app-header",
      "#main-navigation",
      "#user-profile"
    ],
    "optional": [
      ".feature-available",
      "#notification-bell"
    ],
    "custom": "function() { return localStorage.getItem('userType') === 'new'; }",
    "timing": {
      "minDelayAfterPageLoad": 2000,
      "maxDelayAfterPageLoad": 10000
    }
  },
  
  "steps": [
    {
      "id": "welcome-step",
      "title": "欢迎来到我们的应用",
      "content": "感谢您选择我们的产品！让我们开始探索吧。",
      "target": "#app-header",
      "position": "bottom",
      "order": 1,
      
      "options": {
        "showButtons": true,
        "showOverlay": true,
        "allowClose": false,
        "highlightTarget": true,
        "animation": "fade"
      },
      
      "conditions": {
        "required": ["#app-header"],
        "custom": "function() { return true; }"
      },
      
      "hooks": {
        "beforeStep": "function() { console.log('即将开始欢迎步骤'); return true; }",
        "afterStep": "function() { console.log('欢迎步骤完成'); }"
      },
      
      "metadata": {
        "duration": 30,
        "importance": "high",
        "skipAllowed": false
      }
    },
    {
      "id": "navigation-step",
      "title": "导航菜单",
      "content": "这是主导航菜单，您可以在这里访问所有主要功能。",
      "target": "#main-navigation",
      "position": "right",
      "order": 2,
      
      "options": {
        "showButtons": true,
        "showOverlay": true,
        "allowClose": true,
        "highlightTarget": true,
        "animation": "slide"
      },
      
      "actions": {
        "onEnter": "function() { document.querySelector('#main-navigation').classList.add('highlighted'); }",
        "onLeave": "function() { document.querySelector('#main-navigation').classList.remove('highlighted'); }"
      },
      
      "metadata": {
        "duration": 45,
        "importance": "medium",
        "skipAllowed": true
      }
    },
    {
      "id": "profile-step",
      "title": "个人资料",
      "content": "点击这里可以查看和编辑您的个人资料信息。",
      "target": "#user-profile",
      "position": "left",
      "order": 3,
      
      "options": {
        "showButtons": true,
        "showOverlay": true,
        "allowClose": true,
        "highlightTarget": true,
        "animation": "fade"
      },
      
      "interaction": {
        "required": true,
        "type": "click",
        "target": "#user-profile",
        "validation": "function() { return document.querySelector('#user-profile').classList.contains('active'); }"
      },
      
      "metadata": {
        "duration": 60,
        "importance": "high",
        "skipAllowed": false
      }
    },
    {
      "id": "features-step",
      "title": "主要功能",
      "content": "这是应用程序的核心功能区域，包含您需要的所有工具。",
      "target": "#main-content",
      "position": "top",
      "order": 4,
      
      "options": {
        "showButtons": true,
        "showOverlay": true,
        "allowClose": true,
        "highlightTarget": true,
        "animation": "zoom"
      },
      
      "conditions": {
        "required": ["#main-content"],
        "custom": "function() { return document.querySelector('#main-content').children.length > 0; }"
      },
      
      "metadata": {
        "duration": 30,
        "importance": "medium",
        "skipAllowed": true
      }
    },
    {
      "id": "completion-step",
      "title": "完成引导",
      "content": "恭喜！您已经完成了基础引导。现在可以开始使用应用程序了。",
      "target": "body",
      "position": "center",
      "order": 5,
      
      "options": {
        "showButtons": true,
        "showOverlay": false,
        "allowClose": true,
        "highlightTarget": false,
        "animation": "fade"
      },
      
      "hooks": {
        "beforeStep": "function() { console.log('即将完成引导'); return true; }",
        "afterStep": "function() { localStorage.setItem('onboardingCompleted', 'true'); }"
      },
      
      "metadata": {
        "duration": 15,
        "importance": "high",
        "skipAllowed": false
      }
    }
  ],
  
  "options": {
    "general": {
      "allowClose": true,
      "showProgress": true,
      "keyboardNavigation": true,
      "overlayClickToClose": true,
      "animation": true,
      "autoStart": false,
      "forceRestart": false
    },
    
    "appearance": {
      "theme": "light",
      "popoverStyle": "modern",
      "overlayColor": "rgba(0, 0, 0, 0.5)",
      "highlightColor": "rgba(66, 153, 225, 0.5)",
      "zIndex": 10000
    },
    
    "behavior": {
      "scrollToTarget": true,
      "smoothScroll": true,
      "preventInteraction": false,
      "debugMode": false
    }
  },
  
  "hooks": {
    "beforeStart": "function(guideId) { console.log('引导开始前:', guideId); return true; }",
    "afterStart": "function(guideId) { console.log('引导开始后:', guideId); }",
    "beforeStep": "function(guideId, stepId) { console.log('步骤开始前:', guideId, stepId); return true; }",
    "afterStep": "function(guideId, stepId) { console.log('步骤完成后:', guideId, stepId); }",
    "beforeFinish": "function(guideId) { console.log('引导完成前:', guideId); return true; }",
    "afterFinish": "function(guideId) { console.log('引导完成后:', guideId); localStorage.setItem(guideId + '_completed', 'true'); }",
    "onError": "function(error) { console.error('引导错误:', error); }",
    "onStop": "function(guideId) { console.log('引导停止:', guideId); }",
    "onPause": "function(guideId) { console.log('引导暂停:', guideId); }",
    "onResume": "function(guideId) { console.log('引导恢复:', guideId); }
  },
  
  "persistence": {
    "enabled": true,
    "storageKey": "guide_user-onboarding",
    "autoSave": true,
    "autoSaveInterval": 5000,
    "saveOnUnload": true,
    "version": "1.0.0"
  },
  
  "validation": {
    "strict": false,
    "warningsAsErrors": false,
    "skipInvalidSteps": true
  },
  
  "analytics": {
    "trackEvents": true,
    "trackErrors": true,
    "trackPerformance": true,
    "customTracking": "function(event, data) { console.log('分析事件:', event, data); }"
  }
}